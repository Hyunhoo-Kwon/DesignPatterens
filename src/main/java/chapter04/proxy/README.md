## 프록시 (Proxy)

### 목적
다른 객체에 대한 접근을 제어하기 위한 대리자 또는 자리채움자 역할을 하는 객체를 둔다

### 동기
객체에 대한 접근을 제어하는 이유 중 하나는 실제로 그 객체를 사용할 수 있을 때까지 객체 생성과 초기화에 들어가는 비용 및 시간을 물지 않겠다는 것이다. 그래픽 객체와 같이 생성이나 관리가 어려운 객체라면 꼭 필요할 때만 이 객체를 생성하도록 하는 방법이 제기되었으나 이미지가 찍힐 자리에 어떤 내용을 채워 넣을지나 이미지가 필요할 때만 생성된다는 사실을 감추는 등 최적화 렌더링 문제가 발생한다. 이에 대한 해결책으로 이미지처럼 동작하는 프록시를 사용하여, 필요할 때 이미지의 인스턴스를 만들어낸다.

### 활용
1. 원격지 프록시(remote proxy): 서로 다른 주소 공간에 존재하는 객체를 가리키는 대표 객체로, 로컬 환경에 위치한다
2. 가상 프록시(virtual proxy): 요청이 있을 때만 필요한 고비용 객체를 생성한다
3. 보호용 프록시(protection proxy): 원래 객체에 대한 실제 접근을 제어한다
4. 스마트 참조자(smart reference): 원시 포인터의 대체용 객체로, 실제 객체에 대한 접근이 일어날 때 추가적인 행들을 수행한다
    1. 실제 객체에 대한 참조 횟수를 저장하다가 더는 참조가 없을때 해당 객체를 자동으로 없앤다
    2. 맨 처음 참조되는 시점에 영속적 저장소의 객체를 메모리로 옮긴다
    3. 실제 객체에 접근하기 전에, 다른 객체가 그것을 변경하지 못하도록 실제 객체에 대한 잠금(lock)을 건다

### 구조
- Proxy: 실제로 참조할 대상에 대한 참조자를 관리. Subject와 동일한 인터페이스를 제공하여 실제 대상을 대체할 수 있어야 하며, 실제 대상에 대한 접근을 제어하고 실제 대상의 생성과 삭제를 책임진다
    - 원격지 프록시는 요청 메시지와 인자를 인코딩하여 이를 다른 주소 공간에 있는 실제 대상에게 전달
    - 가상 프록시는 실제 대상에 대한 추가적 정보를 보유하여 실제 접근을 지연할 수 있도록한다
    - 보호용 프록시는 요청한 대상이 실제 요청할 수 있는 권한이 있는지 확인한다
- Subject: RealSubject와 Proxy에 공통적인 인터페이스를 정의하여, RealSubject가 요청되는 곳에 Proxy를 사용할 수 있게 한다
- RealSubject: 프록시가 대표하는 실제 객체
> 프록시 클래스는 자신이 받은 요청을 RealSubject 객체에 전달한다
